
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../building_blocks/">
      
      
        <link rel="next" href="../cloud_functions/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.27">
    
    
      
        <title>Chat - Fireship</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.6543a935.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#chat" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Fireship" class="md-header__button md-logo" aria-label="Fireship" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Fireship
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Chat
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Fireship" class="md-nav__button md-logo" aria-label="Fireship" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Fireship
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Fireship
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../location/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    위치, 위치 기반 검색
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Assets
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Assets
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../assets/firestore_security_rules/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Firestore security rules
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../assets/realtime_database_security_rules/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Realtime database security rules
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../assets/storage_security_rules/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Storage security rules
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    English
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            English
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FireFlutter
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../action_log/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Action Log
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../activity_log/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Activity Log
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Admin
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../bookmark/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bookmark
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../building_blocks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Building Blocks
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Chat
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Chat
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#design-concept" class="md-nav__link">
    <span class="md-ellipsis">
      Design Concept
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#chat-database" class="md-nav__link">
    <span class="md-ellipsis">
      Chat Database
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Chat Database">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#chat-rooms" class="md-nav__link">
    <span class="md-ellipsis">
      Chat Rooms
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Chat Rooms">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#chat-room-hook" class="md-nav__link">
    <span class="md-ellipsis">
      Chat Room hook
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structure-of-chat-messages" class="md-nav__link">
    <span class="md-ellipsis">
      Structure of Chat Messages
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#coding-technique" class="md-nav__link">
    <span class="md-ellipsis">
      Coding Technique
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Coding Technique">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fetching-all-users-chat-messages-in-a-chat-room" class="md-nav__link">
    <span class="md-ellipsis">
      Fetching All Users' Chat Messages in a Chat Room
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-chatroom-from-chatmodel" class="md-nav__link">
    <span class="md-ellipsis">
      Get ChatRoom from ChatModel
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#order" class="md-nav__link">
    <span class="md-ellipsis">
      Order
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-chat-room" class="md-nav__link">
    <span class="md-ellipsis">
      Creating Chat Room
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#viewing-chat-room" class="md-nav__link">
    <span class="md-ellipsis">
      Viewing Chat Room
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#updating-chat-room" class="md-nav__link">
    <span class="md-ellipsis">
      Updating Chat Room
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sending-chat-messages" class="md-nav__link">
    <span class="md-ellipsis">
      Sending Chat Messages
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getting-chat-messages-in-a-room" class="md-nav__link">
    <span class="md-ellipsis">
      Getting Chat Messages in a Room
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opening-the-settings-for-the-chat-room" class="md-nav__link">
    <span class="md-ellipsis">
      Opening the Settings for the Chat Room
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Opening the Settings for the Chat Room">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#gender-options-in-chatroom-settings" class="md-nav__link">
    <span class="md-ellipsis">
      Gender options in Chatroom settings.
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#chat-room-list" class="md-nav__link">
    <span class="md-ellipsis">
      Chat Room List
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Chat Room List">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#chat-list-widget" class="md-nav__link">
    <span class="md-ellipsis">
      Chat List Widget
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#list-group-single-11-open-or-all-chat-rooms-where-the-user-is-joined" class="md-nav__link">
    <span class="md-ellipsis">
      List Group, Single (1:1), Open, or All Chat Rooms where the user is joined
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#querying-specific-type-of-chat-rooms" class="md-nav__link">
    <span class="md-ellipsis">
      Querying Specific Type of Chat Rooms
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Querying Specific Type of Chat Rooms">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#chat-rooms-joined-by-the-currently-logged-in-user-joinsref" class="md-nav__link">
    <span class="md-ellipsis">
      Chat Rooms Joined by the Currently Logged in User (joinsRef)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#chat-rooms-not-necessarily-joined-by-the-currently-logged-in-user-roomsref" class="md-nav__link">
    <span class="md-ellipsis">
      Chat Rooms not Necessarily Joined by the Currently Logged in User (roomsRef)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toggling-notifications" class="md-nav__link">
    <span class="md-ellipsis">
      Toggling Notifications
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#group-chat-room" class="md-nav__link">
    <span class="md-ellipsis">
      Group Chat Room
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Group Chat Room">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-a-group-chat" class="md-nav__link">
    <span class="md-ellipsis">
      Creating a Group Chat
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Creating a Group Chat">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#chatroomeditdialog" class="md-nav__link">
    <span class="md-ellipsis">
      ChatRoomEditDialog
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inviting-users-into-a-chat-room" class="md-nav__link">
    <span class="md-ellipsis">
      Inviting users into a Chat Room
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#group-chat-members" class="md-nav__link">
    <span class="md-ellipsis">
      Group Chat Members
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#removing-a-group-chat-member" class="md-nav__link">
    <span class="md-ellipsis">
      Removing a Group Chat Member
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#management" class="md-nav__link">
    <span class="md-ellipsis">
      Management
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#chat-message-sent-hook" class="md-nav__link">
    <span class="md-ellipsis">
      Chat Message Sent Hook
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#changing-logic-before-sending-chat-messages" class="md-nav__link">
    <span class="md-ellipsis">
      Changing logic before sending chat messages
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#blocking-users" class="md-nav__link">
    <span class="md-ellipsis">
      Blocking users
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deleting-message" class="md-nav__link">
    <span class="md-ellipsis">
      Deleting message
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#chat-bubble-behaviors" class="md-nav__link">
    <span class="md-ellipsis">
      Chat Bubble Behaviors
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Chat Bubble Behaviors">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#when-message-is-too-long" class="md-nav__link">
    <span class="md-ellipsis">
      When message is too long
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#when-replied-message-is-tapped" class="md-nav__link">
    <span class="md-ellipsis">
      When replied message is tapped
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#when-long-pressed" class="md-nav__link">
    <span class="md-ellipsis">
      When long pressed
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#replying-on-a-message" class="md-nav__link">
    <span class="md-ellipsis">
      Replying on a message
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#known-issues" class="md-nav__link">
    <span class="md-ellipsis">
      Known Issues
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cloud_functions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cloud Functions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../comments/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Comments
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../country_picker/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Country Picker
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../database/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Database
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dynamic_link/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dynamic Link
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../extensions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Extensions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../forum/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Forum
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../friend/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Friend
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../functions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Functions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../install/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../meetup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Meetup
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../messaging/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Push Notifications
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../report/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Reporting
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../storage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Storage
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../test/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Testing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../theme/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Theme Design
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../todo/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    TODO
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../translation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Text
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../typesense/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Typesense
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../user/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    User
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../widgets/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Widgets
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Korean
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Korean
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../korean/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FireFlutter
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../korean/action_log/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    액션 로그
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../korean/activity_log/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    활동 로그
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../korean/admin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    관리자
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../korean/bookmark/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    북마크
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../korean/building_blocks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    빌딩 블록
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../korean/chat/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    채팅
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../korean/cloud_functions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    클라우드 함수
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../korean/comment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    코멘트
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../korean/country_picker/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    국가 정보 선택
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../korean/database/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    데이터베이스
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../korean/design/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    디자인
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../korean/dynamic_link/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    다이나믹 링크
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../korean/error_handling/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    에러 핸들링
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../korean/extensions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    익스텐션
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../korean/fireflutter/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FireFlutter 설정
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../korean/forum/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    게시판
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../korean/friend/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    친구
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../korean/functions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Fireship 에서 제공하는 함수들
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../korean/install/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    설치
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../korean/like/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    좋아요
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../korean/meetup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Meetup
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../korean/messaging/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    푸시 알림
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../korean/packages/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    패키지 목록
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../korean/post/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    글
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../korean/quick_start/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    빠르게 시작하기
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../korean/report/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    신고
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../korean/storage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    스토리지
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../korean/test/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    테스트
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../korean/theme/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    테마 디자인
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../korean/translation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    언어 번역
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../korean/trouble_shooting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    오류 발생 시 문제 해결
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../korean/typesense/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Typesense 풀텍스트 검색
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../korean/user/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    사용자
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../korean/user_settings/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    사용자 설정
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../korean/widgets/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    위젯
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_37" >
        
          
          <label class="md-nav__link" for="__nav_5_37" id="__nav_5_37_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Address
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_37_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_37">
            <span class="md-nav__icon md-icon"></span>
            Address
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../korean/address/korean_address/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    한국 주소 관련 기능
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#design-concept" class="md-nav__link">
    <span class="md-ellipsis">
      Design Concept
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#chat-database" class="md-nav__link">
    <span class="md-ellipsis">
      Chat Database
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Chat Database">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#chat-rooms" class="md-nav__link">
    <span class="md-ellipsis">
      Chat Rooms
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Chat Rooms">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#chat-room-hook" class="md-nav__link">
    <span class="md-ellipsis">
      Chat Room hook
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structure-of-chat-messages" class="md-nav__link">
    <span class="md-ellipsis">
      Structure of Chat Messages
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#coding-technique" class="md-nav__link">
    <span class="md-ellipsis">
      Coding Technique
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Coding Technique">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fetching-all-users-chat-messages-in-a-chat-room" class="md-nav__link">
    <span class="md-ellipsis">
      Fetching All Users' Chat Messages in a Chat Room
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-chatroom-from-chatmodel" class="md-nav__link">
    <span class="md-ellipsis">
      Get ChatRoom from ChatModel
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#order" class="md-nav__link">
    <span class="md-ellipsis">
      Order
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-chat-room" class="md-nav__link">
    <span class="md-ellipsis">
      Creating Chat Room
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#viewing-chat-room" class="md-nav__link">
    <span class="md-ellipsis">
      Viewing Chat Room
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#updating-chat-room" class="md-nav__link">
    <span class="md-ellipsis">
      Updating Chat Room
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sending-chat-messages" class="md-nav__link">
    <span class="md-ellipsis">
      Sending Chat Messages
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getting-chat-messages-in-a-room" class="md-nav__link">
    <span class="md-ellipsis">
      Getting Chat Messages in a Room
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opening-the-settings-for-the-chat-room" class="md-nav__link">
    <span class="md-ellipsis">
      Opening the Settings for the Chat Room
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Opening the Settings for the Chat Room">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#gender-options-in-chatroom-settings" class="md-nav__link">
    <span class="md-ellipsis">
      Gender options in Chatroom settings.
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#chat-room-list" class="md-nav__link">
    <span class="md-ellipsis">
      Chat Room List
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Chat Room List">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#chat-list-widget" class="md-nav__link">
    <span class="md-ellipsis">
      Chat List Widget
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#list-group-single-11-open-or-all-chat-rooms-where-the-user-is-joined" class="md-nav__link">
    <span class="md-ellipsis">
      List Group, Single (1:1), Open, or All Chat Rooms where the user is joined
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#querying-specific-type-of-chat-rooms" class="md-nav__link">
    <span class="md-ellipsis">
      Querying Specific Type of Chat Rooms
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Querying Specific Type of Chat Rooms">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#chat-rooms-joined-by-the-currently-logged-in-user-joinsref" class="md-nav__link">
    <span class="md-ellipsis">
      Chat Rooms Joined by the Currently Logged in User (joinsRef)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#chat-rooms-not-necessarily-joined-by-the-currently-logged-in-user-roomsref" class="md-nav__link">
    <span class="md-ellipsis">
      Chat Rooms not Necessarily Joined by the Currently Logged in User (roomsRef)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#toggling-notifications" class="md-nav__link">
    <span class="md-ellipsis">
      Toggling Notifications
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#group-chat-room" class="md-nav__link">
    <span class="md-ellipsis">
      Group Chat Room
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Group Chat Room">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-a-group-chat" class="md-nav__link">
    <span class="md-ellipsis">
      Creating a Group Chat
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Creating a Group Chat">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#chatroomeditdialog" class="md-nav__link">
    <span class="md-ellipsis">
      ChatRoomEditDialog
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inviting-users-into-a-chat-room" class="md-nav__link">
    <span class="md-ellipsis">
      Inviting users into a Chat Room
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#group-chat-members" class="md-nav__link">
    <span class="md-ellipsis">
      Group Chat Members
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#removing-a-group-chat-member" class="md-nav__link">
    <span class="md-ellipsis">
      Removing a Group Chat Member
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#management" class="md-nav__link">
    <span class="md-ellipsis">
      Management
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#chat-message-sent-hook" class="md-nav__link">
    <span class="md-ellipsis">
      Chat Message Sent Hook
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#changing-logic-before-sending-chat-messages" class="md-nav__link">
    <span class="md-ellipsis">
      Changing logic before sending chat messages
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#blocking-users" class="md-nav__link">
    <span class="md-ellipsis">
      Blocking users
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deleting-message" class="md-nav__link">
    <span class="md-ellipsis">
      Deleting message
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#chat-bubble-behaviors" class="md-nav__link">
    <span class="md-ellipsis">
      Chat Bubble Behaviors
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Chat Bubble Behaviors">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#when-message-is-too-long" class="md-nav__link">
    <span class="md-ellipsis">
      When message is too long
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#when-replied-message-is-tapped" class="md-nav__link">
    <span class="md-ellipsis">
      When replied message is tapped
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#when-long-pressed" class="md-nav__link">
    <span class="md-ellipsis">
      When long pressed
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#replying-on-a-message" class="md-nav__link">
    <span class="md-ellipsis">
      Replying on a message
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#known-issues" class="md-nav__link">
    <span class="md-ellipsis">
      Known Issues
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="chat">Chat</h1>
<h2 id="design-concept">Design Concept</h2>
<ul>
<li>You can open multiple chat rooms simultaneously.</li>
</ul>
<h2 id="chat-database">Chat Database</h2>
<ul>
<li><code>/chat-rooms</code> stores information about chat rooms.</li>
<li><code>/chat-messages</code> stores chat messages.</li>
<li><code>/chat-joins</code> indicates who is participating in which chat room. Both <code>/chat-rooms</code> and <code>/chat-joins</code> use the <code>ChatRoom</code>.</li>
<li><code>noOfUsers</code> is updated in <code>/chat-rooms</code> when a new user joins or leaves a group chat room,</li>
<li>and is updated in <code>/chat-joins</code> when a chat message is sent.</li>
<li>When sending a chat message, if the text contains a URL, information for previewing the URL is extracted. The appropriate values are stored in the following fields below the message:</li>
<li><code>previewUrl</code> - URL</li>
<li><code>previewTitle</code> - Title</li>
<li><code>previewDescription</code> - Description</li>
<li><code>previewImageUrl</code> - Image</li>
</ul>
<h3 id="chat-rooms">Chat Rooms</h3>
<ul>
<li><code>blocks</code>: Administrators manage the block list of chat rooms here. Users whose UIDs added here cannot enter the chat room. Additionally, they are automatically ejected from the chat room. (<strong>TODO: Functionality not implemented as of 2024-02-22.</strong>)</li>
</ul>
<h4 id="chat-room-hook">Chat Room hook</h4>
<p>Hooks available before joining group chat or creating single chat room</p>
<ul>
<li>beforeSingleChatRoomCreate</li>
<li>beforeGroupChatRoomJoin</li>
</ul>
<p>You can use the <code>beforeSingleChatRoomCreate</code> hook to do something before the room is created.
You can use this hook if you have a condition like the dont let the room be created if current/other User is not verified.
You can also intercept the creation of the room by throwing an exception.</p>
<pre><code class="language-dart">    ChatService.instance.init(
      beforeSingleChatRoomCreate: (String otherUid) async {
        if(iam.notVerified) {
          await error(
            context: context,
            title: 'Not Verified',
            message: 'Not verified user.....',
          );
          throw T.iamNotVerified.tr;
        }
        User? otherUser = await User.get(otherUid);
        if (otherUser == null) {
          // show error message
          throw T.noUserFound.tr;
        }
        if (otherUser.notVerified) {
          // show error message
          throw T.otherUserNotVerified.tr;
        }
      },
    )
</code></pre>
<p>You can also use <code>beforeGroupChatRoomJoin</code> hook to do something before joining a group.
But since group master already have restriction setting,
You can use this hook if you have special condition before joining the group.
You can also Intercept the joining of the room by throwing an exception.</p>
<pre><code class="language-dart">    ChatService.instance.init(
      beforeGroupChatRoomJoin: (ChatRoom room) async {
        /// do something before the current user id will be inserted into the chatroom users
      },
    )
</code></pre>
<h3 id="structure-of-chat-messages">Structure of Chat Messages</h3>
<ul>
<li>uid: The UID of the user who sent the message.</li>
<li>createdAt: The time when the message was sent.</li>
<li>order: The order of the message in the list.</li>
<li>text: The text message content.</li>
<li>url: The URL of the photo if a photo was sent.</li>
</ul>
<h2 id="coding-technique">Coding Technique</h2>
<h3 id="fetching-all-users-chat-messages-in-a-chat-room">Fetching All Users' Chat Messages in a Chat Room</h3>
<p>By doing the following, you can retrieve all messages in the chat room sorted by <code>uid</code>. Be careful not to fetch too much data to avoid excessive download size.</p>
<pre><code class="language-dart">// Get the chat room first.
final ChatModel chatRoom = await ChatModel.get('chat-room-id');

final snapshot = await ChatModel.messageseRef
    .orderByChild('uid')
    .get();

if (snapshot.exists) {
  print((snapshot.value as Map).keys.length);
  for (var key in (snapshot.value as Map).keys) {
    print((snapshot.value as Map)[key]['uid'] +
        ' : ' +
        ((snapshot.value as Map)[key]['text'] ?? '--'));
  }
}
</code></pre>
<h3 id="get-chatroom-from-chatmodel">Get ChatRoom from ChatModel</h3>
<ul>
<li>The <code>ChatModel</code> instance is needed before displaying the chat room message.</li>
<li>to check if the user is in the room,</li>
<li>to check if site preview displaying or image displaying options,</li>
<li>to show password input box based on the chat room settings,</li>
<li>etc</li>
</ul>
<p>To clarify, <code>ChatRoom</code> and <code>ChatModel</code> are two different models. The <code>ChatRoom</code> is the model that holds some details of the chat room. The <code>ChatModel</code> is the complete model that holds all the details of the chat room and the chat messages. In short, the <code>ChatRoom</code> is accessible <code>ChatModel.chatRoom</code>.</p>
<h3 id="order">Order</h3>
<ul>
<li>Chat message order is sorted by the last message's <code>order</code> field.</li>
<li>The later message must have a smaller value than the previous message. Meaning the latest message always have the smallest value.</li>
<li>When you send a chat message programatically without <code>order</code>, the message may be shown at the wrong place (at the top).</li>
</ul>
<h3 id="creating-chat-room">Creating Chat Room</h3>
<p>A simple way to create a chat room is as follows:</p>
<pre><code class="language-dart">ChatModel chat = ChatModel(room: ChatRoom.fromRoomdId('all'))..join();
ChatMessageListView(chat: chat);
</code></pre>
<p>Creating a <code>ChatModel</code> alone does not create the chat room. Therefore, <code>join()</code> is called additionally.</p>
<p>When join() is called, {[uid]: true} is created in /chat-rooms/all/users.</p>
<p>And when the <code>ChatMessageListView</code> widget is displayed on the screen, it internally saves <code>{order: 0}</code> in RTDB <code>chat-joins/all</code> in <code>ChatMessageListView::initState() -&gt; ChatModel::resetNewMessage()</code>.</p>
<p>However, if you want to create a chat room more easily, you can use the pre-made <code>ChatService.instance.showChatRoomCreate()</code> function. If you want to customize the design, you can copy and modify <code>DefaultChatRoomEditDialog</code>.</p>
<p>By passing true on the [authRequired] on <code>ChatService.intance.showChatRoomCreate</code> it will display a menu to allow only the verified user if <code>true</code> to enter the chat room and allow non-verified user if <code>false</code>.</p>
<p><code>DefaultChatRoomEditDialog</code> is a pre-made widget dialog for creating chat-room. if the chat room is <code>not yet exist</code> and the [authRequired] is set to <code>true</code> and [isVerifiedOnly] is set to <code>true</code> it will create a chat room that will only allow user that is verified.</p>
<pre><code class="language-dart">ChatService.instance.showChatRoomCreate(
  context: context
  authRequired: true,
);
</code></pre>
<h3 id="viewing-chat-room">Viewing Chat Room</h3>
<p>A <code>ChatRoomBody()</code> widget can be used to show chat room (room's messages with room input box).</p>
<pre><code class="language-dart">// For 1:1 chat room, using other user's uid
ChatRoomBody(uid: 'user-uid');

...

// Using room-id for 1:1 or group chat room
ChatRoomBody(roomId: 'room-id');

...

// Using snapshot -&gt; ChatRoom
ChatRoom chatRoom = ChatRoom.fromSnapshot(dataSnapshot);
ChatRoomBody(room: chatRoom);
</code></pre>
<h3 id="updating-chat-room">Updating Chat Room</h3>
<p>To update a chat room, call <code>ChatService.instance.showChatRoomSettings(roomId: ...)</code>, and use the <code>DefaultChatRoomEditDialog</code> widget, which is the same widget used for creating a chat room.</p>
<p>When updating a chat room, you can optionally specify authenticated members and gender. If the <code>gender</code> has a value of <code>M</code> or <code>F</code>, only members of that gender can access (enter) the room. For <code>verified</code>, regardless of gender, if the user is verified, they can access the room. Note that authenticated members and gender refer to user information.</p>
<h3 id="sending-chat-messages">Sending Chat Messages</h3>
<p>To send a chat message into a room (or to a user), <code>ChatMessageInputBox()</code> can be used as Input box. You can copy this widget and customize by yourself.</p>
<pre><code class="language-dart">// the ChatRoom is required. Get it.
ChatRoom room = ChatRoom.fromSnaphot(snapshot);

// the `chat` should be the model of the room
ChatModel chat = ChatModel(room: room);

ChatMessageInputBox(
  chat: chat,
),
</code></pre>
<p>You can also send a chat message to a user or to a room programatically (without entering a chat room screen) like below.</p>
<pre><code class="language-dart">// the ChatRoom is required. Get it.
ChatRoom room = ChatRoom.fromSnaphot(snapshot);

ChatModel chat = ChatModel(room: room);

// This may throw error if user is not logged in.
chat.sendMessage(text: 'Text Message to send', url: 'photo.url.com');

</code></pre>
<h3 id="getting-chat-messages-in-a-room">Getting Chat Messages in a Room</h3>
<p>To display chat messages in a room, <code>ChatMessageListView()</code> can be used.</p>
<pre><code class="language-dart">// the ChatRoom is required. Get it.
ChatRoom room = ChatRoom.fromSnaphot(snapshot);

// the `chat` should be the model of the room
ChatModel chat = ChatModel(room: room);

ChatMessageListView(
  chat: chat,
),
</code></pre>
<p>For customization, these can be used. Edit them as needed:</p>
<pre><code class="language-dart">DatabaseReference ref = ChatService.instance.messageRef(roomId: roomId).orderByChild('order');

FirebaseDatabaseQueryBuilder(
  pageSize: 100,
  query: ref,
  builder: (context, snapshot, _) {
    if (snapshot.isFetching) {
      return CircularProgressIndicator();
    }
    if (snapshot.hasError) {
      return Text('Something went wrong! ${snapshot.error}');
    }
    if (snapshot.docs.isEmpty) {
      return Center(child: Text('There is no message, yet.'));
    }
    // finally return the list
    return ListView.builder(
      reverse: true,
      itemCount: snapshot.docs.length,
      itemBuilder: (context, index) {
        if (snapshot.hasMore &amp;&amp; index + 1 == snapshot.docs.length) {
          snapshot.fetchMore();
        }
        final message = ChatMessage.fromSnapshot(snapshot.docs[index]);

        /// 채팅방의 맨 마지막 메시지의 order 를 지정.
        chat.resetRoomMessageOrder(order: message.order);

        return YourCustomChatBubble(
          message: message,
        );
      },

    );
  },
);

</code></pre>
<h3 id="opening-the-settings-for-the-chat-room">Opening the Settings for the Chat Room</h3>
<p>To open the Settings for the Chat Room</p>
<pre><code class="language-dart">ChatService.instance.showChatRoomSettings(
  context: context,
  roomId: chat.room.id,
);
</code></pre>
<h4 id="gender-options-in-chatroom-settings">Gender options in Chatroom settings.</h4>
<p>Gender can be <code>All</code>, <code>Male</code> or <code>Female</code>.
Gender options allows <code>master</code> to limit the users who can join the chatroom.
To set the this, you can call <code>ChatService.instance.showChatRoomSettings</code> to show the chatroom settings.
Under the gender options select the gender that will be allowed to join the chatroom then save.</p>
<p>If the user already joined the chatroom before it was change. Then they can still join the chatroom normally.
For new users that will join the chatroom that has different gender,
There will be a <code>FireFlutterException</code> with code <code>Code.chatRoomUserGenderNotAllowed</code>.</p>
<p>This will allow the developer to catch the error and display a message to the user.
You can do <code>try catch</code> or you can catch it on the <code>runZonedGuarded</code> like the following code.</p>
<pre><code class="language-dart">void main() async {
  runZonedGuarded(
    () async {
      runApp(
        MyApp(),
      );
    },
    zoneErrorHandler(e, stackTrace) {
      if (e is FireFlutterException) {
        if(e.code == Code.chatRoomUserGenderNotAllowed)
          error(context: context, message: e.message);
      }
      debugPrintStack(stackTrace: stackTrace);
    },
  );
}

</code></pre>
<h3 id="chat-room-list">Chat Room List</h3>
<p>Due to the characteristics of RTDB, it is challenging to list chat rooms:</p>
<ul>
<li>My 1:1 chat room list by date</li>
<li>My entire chat room list by date</li>
<li>Open chat list by date</li>
</ul>
<p>Therefore, by using <code>isSingleChat</code> with a negative time, you can display my 1:1 chat room list in chronological order. This is the same for <code>isGroupChat</code> and <code>isOpenGroupChat</code>.</p>
<p>To display the entire chat room list at once, get all chat rooms and display them. For example, when displaying my 1:1 chat room list, get the entire list and display it in chronological order. Do the same for my entire group chat room and all open chat room. However, this method may not be suitable if each individual's (user's) chat rooms are too numerous. Overall, it seems reasonable to have up to 500 per person. Up to 2,000 should also be acceptable. However, if a user has more than 2,000 rooms, it might be a bit challenging. Therefore, limiting the number of rooms may be one way. Additionally, having more than 2,000 open chats might be problematic.</p>
<p>Here is an example code to show chat room list. This will show list of all Chat Rooms by the currently logged in user. Take note that the <code>Field.order</code> is the same as 'order'.</p>
<pre><code class="language-dart">FirebaseDatabaseQueryBuilder(
  query: ChatService.instance.joinsRef
      .child(myUid!)
      .orderByChild(Field.order),
  pageSize: 50,
  builder: (context, snapshot, _) {
    if (snapshot.isFetching) {
      return const Center(child: CircularProgressIndicator());
    }
    if (snapshot.hasError) {
      return Text('Something went wrong! ${snapshot.error}');
    }
    if (snapshot.hasMore == false &amp;&amp; snapshot.docs.isEmpty) {
      return Text('No chat rooms');
    }
    return ListView.builder(
      padding: EdgeInsets.zero,
      itemCount: snapshot.docs.length,
      itemBuilder: (context, index) {
        if (snapshot.hasMore &amp;&amp; index + 1 == snapshot.docs.length) {
          snapshot.fetchMore();
        }
        final room = ChatRoom.fromSnapshot(snapshot.docs[index]);
        return ChatRoomListTile(room: room);
      },
    );
  },
);

</code></pre>
<h4 id="chat-list-widget">Chat List Widget</h4>
<p>Fireship provides a default Widget for displaying a list of Chat Rooms if we don't have to customize it.</p>
<p>Chat List is a List view of Chats. We can use this widget to show a list of chats.</p>
<pre><code class="language-dart">DefaultChatRoomListView(),
</code></pre>
<h4 id="list-group-single-11-open-or-all-chat-rooms-where-the-user-is-joined">List Group, Single (1:1), Open, or All Chat Rooms where the user is joined</h4>
<p>The <code>ChatRoomListView</code> widget can be used to show different listings of chat rooms.</p>
<pre><code class="language-dart">ChatRoomListView(),
</code></pre>
<p>The example above will show the chat room list of the user's chat rooms (where the user is joined).</p>
<p>Using the <code>ChatRoomList</code> enum, it can be specified which group chats should be displayed. The default is <code>ChatRoomList.my</code>.</p>
<pre><code class="language-dart">// Listing of all chat rooms where the user is joined (whether single or group)
ChatRoomListView(
  chatRoomList: ChatRoomList.my,
),

// Listing of all single (1:1) chat rooms where the user is joined/invloved
ChatRoomListView(
  chatRoomList: ChatRoomList.single,
),

// Listing of all group chat rooms where the user is joined (whether close or open chat)
ChatRoomListView(
  chatRoomList: ChatRoomList.group,
),

// Listing of all open group chat rooms (whether the user is joined or not)
ChatRoomListView(
  chatRoomList: ChatRoomList.open,
),


// Listing of all open group chat rooms base on the domain set in `ChatService.intance.chatRoomSettings.domain`
ChatRoomListView(
  chatRoomList: ChatRoomList.domain,
),
</code></pre>
<p>You can display chat rooms of a specific domain. by Using the widget <code>ChatRoomListView()</code> </p>
<pre><code class="language-dart">ChatRoomListView(
  chatRoomList: ChatRoomList.domain,
)
</code></pre>
<p>or </p>
<pre><code class="language-dart">FirebaseDatabaseQueryBuilder(
  query: ChatService.instance.joinsRef
      .child(myUid!)
      .orderByChild(Field.domainChatOrder)
      .startAt('my-domain'),
      .endAt('my-domain\uf8ff')
  pageSize: 50,
  builder: (context, snapshot, _) {
    ...
  },
);
</code></pre>
<h4 id="querying-specific-type-of-chat-rooms">Querying Specific Type of Chat Rooms</h4>
<p>You may want to show specific types of Chat Rooms, like Single Chat Rooms only, Group Chats Only, or Open Group Chats only.</p>
<h5 id="chat-rooms-joined-by-the-currently-logged-in-user-joinsref">Chat Rooms Joined by the Currently Logged in User (joinsRef)</h5>
<p>In the earlier example, the query in FirebaseDatabaseQueryBuilder uses <code>Field.order</code>:</p>
<pre><code class="language-dart">FirebaseDatabaseQueryBuilder(
  query: ChatService.instance.joinsRef
      .child(myUid!)
      .orderByChild(Field.order)
      .startAt(false),
  pageSize: 50,
  builder: (context, snapshot, _) {
    ...
  },
);
</code></pre>
<p>For <code>ChatService.instance.joinsRef.child(myUid!)</code>, the <code>joinsRef</code> is the reference for the chat rooms. In RTDB the node is <code>chat-joins/user-uid/room-id</code>. Therefore, <code>myUid</code> is required.</p>
<p>The <code>Field.order</code> is the same with 'order'. This can be used to get all the group chat that the currently logged in user is joined. Here are the list of fields can be used in <code>joinsRef</code>:</p>
<ol>
<li><code>Field.order</code> - same as 'order'.</li>
<li>All chat room - single or group chat</li>
<li><code>Field.singleChatOrder</code> - same as 'singleChatOrder'.</li>
<li>All single chat room</li>
<li><code>Field.groupChatOrder</code> - same as 'groupChatOrder'.</li>
<li>All group chat room</li>
<li><code>Field.openChatOrder</code> - same as 'openChatOrder'.</li>
<li>All open chat room </li>
<li><code>Field.domainChatOrder</code> - same as 'domainChatOrder'.</li>
<li>All open chat room base on the domain set in <code>ChatService.intance.chatRoomSettings.domain</code></li>
</ol>
<h5 id="chat-rooms-not-necessarily-joined-by-the-currently-logged-in-user-roomsref">Chat Rooms not Necessarily Joined by the Currently Logged in User (roomsRef)</h5>
<p>For <code>ChatService.instance.roomsRef</code>, the <code>roomsRef</code> is the reference for the chat rooms. In RTDB the node is <code>chat-rooms/roon-id</code>.</p>
<pre><code class="language-dart">FirebaseDatabaseQueryBuilder(
  query: ChatService.instance.roomsRef
      .orderByChild(Field.openGroupChatOrder)
      .startAt(false),
  pageSize: 50,
  builder: (context, snapshot, _) {
    ...
  }
);
</code></pre>
<p>Here are the list of fields can be used in <code>roomsRef</code>:</p>
<ol>
<li><code>Field.groupChatOrder</code> - same as 'groupChatOrder'.</li>
<li>All group chat room - open or closed</li>
<li><code>Field.openGroupChatOrder</code> - same as 'openGroupChatOrder'.</li>
<li>All open group chat room</li>
</ol>
<h2 id="toggling-notifications">Toggling Notifications</h2>
<p>The on and off switch for push notification is set under each user's uid in <code>users</code> field of the chat room.
For instance, if the value is <code>true</code> like <code>/chat-rooms/&lt;room-id&gt;/users/ {uid-a: true}</code>, then the user of <code>uid-a</code> will get push notification. If it's <code>false</code>, then the user will not get any push notification.</p>
<p>You can set true or false for the login uid in the 'users' field of the chat room like below;</p>
<pre><code class="language-dart">IconButton(
  onPressed: () async {
    await chat.room.toggleNotifications();
  },
  icon: Database(
    path: Path.chatRoomUsersAt(chat.room.id, myUid!),
    builder: (v) =&gt; v == true
        ? const Icon(Icons.notifications_rounded)
        : const Icon(Icons.notifications_outlined),
  ),
),
</code></pre>
<p>When <code>v</code> is true, notifications is toggled on. Else, toggled off.</p>
<h2 id="group-chat-room">Group Chat Room</h2>
<h3 id="creating-a-group-chat">Creating a Group Chat</h3>
<p>Use <code>ChatService.instance.showChatRoomCreate()</code> for the default way on creating a chat room.</p>
<pre><code class="language-dart">
IconButton(
  onPressed: () async {
    final room = await ChatService.instance.showChatRoomCreate(context: context);
    // It is recommended to show the newly created room to the user.
    if (room != null &amp;&amp; mounted) {
      ChatService.instance.showChatRoom(context: context, roomId: room.id);
    }
  },
  icon: const Icon(Icons.comment),
),

</code></pre>
<h4 id="chatroomeditdialog">ChatRoomEditDialog</h4>
<p>By Default chat edit dialog display all the options including name, description, and password and verification options. and for instance your app does not support verification and gender option things you can hide the options by doing the code below. </p>
<pre><code class="language-dart">ChatService.instance.init(
  chatRoomSettings: ChatRoomSettings(
    enebaleVerifiedUserOption:false,
    enableGenderOption: false,
    domain: 'my-app'
  )
)
</code></pre>
<p>for instance you have two apps and using one database projects as your project</p>
<p>Automatically, creator of the room will join to the newly created room after submitting.</p>
<h3 id="inviting-users-into-a-chat-room">Inviting users into a Chat Room</h3>
<p>To show the default invite screen, add these code:</p>
<pre><code class="language-dart">IconButton(
  onPressed: () async {
    ChatService.instance.showInviteScreen(context: context, room: chat.room);
  },
  icon: const Icon(Icons.person_add_rounded),
),
</code></pre>
<p>The <code>ChatService.instance.showInviteScreen()</code> will show a list of users in a list view who can be added. It uses <code>DefaultChatRoomInviteScreen</code> widget. Check this code for reference in customization:</p>
<pre><code class="language-dart">// Showing the list screen
await showGeneralDialog&lt;ChatRoom?&gt;(
  context: context,
  pageBuilder: (_, __, ___) =&gt; CustomChatRoomInviteScreen(room: room),
);
...
// Update this into your custom Invite screen
class CustomChatRoomInviteScreen extends StatelessWidget {
  const CustomChatRoomInviteScreen({
    super.key,
    required this.room,
  });
  final ChatRoom room;
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: const Text('친구 초대'),
      ),
      body: FirebaseDatabaseListView(
        query: Ref.users.orderByChild('order'),
        itemBuilder: (context, snapshot) {
          final user = UserModel.fromSnapshot(snapshot);
          return ListTile(
            leading: UserAvatar(uid: user.uid),
            title: Text(user.displayName ?? ''),
            trailing: const Icon(Icons.add),
            onTap: () async {
              await room.invite(user.uid);
            },
          );
        },
      ),
    );
  }
}
</code></pre>
<h3 id="group-chat-members">Group Chat Members</h3>
<p>To show the default members screen, add these code:</p>
<pre><code class="language-dart">await ChatService.instance.showMembersScreen(
  context: context,
  room: chat.room,
);
</code></pre>
<p>It uses the <code>DefaultChatRoomMembersScreen(room: room)</code> when it is not customized.</p>
<h3 id="removing-a-group-chat-member">Removing a Group Chat Member</h3>
<p>Here is an example of a button that removes a user from the group chat. It uses <code>room.remove(member.uid)</code> code to remove the user.</p>
<pre><code class="language-dart">final room = ChatRoom.fromSnapshot(snapshot);
// ...
final member = UserModel.fromSnapshot(snapshot);
// ...
TextButton(
  onPressed: () {
    room.remove(member.uid);
    Navigator.pop(context);
  },
  child: const Text('Remove User'),
),
</code></pre>
<h2 id="management">Management</h2>
<ul>
<li>You can use the default admin screen. Just call <code>AdminService.instance.showDashboard()</code>.</li>
</ul>
<h2 id="chat-message-sent-hook">Chat Message Sent Hook</h2>
<p>If you want to perform certain actions after sending a chat message, you can use a hook.</p>
<p>For example, if you want to translate the sent chat message into another language after sending it, you can first send the chat message, then translate it using a translation API, and finally update the content of the sent chat message.</p>
<pre><code class="language-dart">void initChatService() {
  ChatService.instance.init(
    onMessageSent: (ChatMessage message) async {
      /// You can perform desired actions here.
      /// For example, you can detect the language of the recipient and then translate the chat message using the https://pub.dev/packages/translator package
      /// After that, you can update the chat message as follows:
      /// This means automatically translating the chat message into another language.
      try {
        await message.ref!.update({
          Field.text:
              &quot;Translated message: ...., original message: ${message.text}&quot;
        });
      } catch (e) {
        dog('onMessageSent: ${e.toString()}, path: ${message.ref!.path}');
        rethrow;
      }
    },
  );
}
</code></pre>
<h2 id="changing-logic-before-sending-chat-messages">Changing logic before sending chat messages</h2>
<p>If you want to add logic before sending chat messages (or photos), you can use <code>beforeMessageSent</code>.</p>
<p>For example, if you don't want to send a chat message if the member doesn't have a photo or name, you can do the following.</p>
<pre><code class="language-dart">ChatService.instance.init(
  beforeMessageSent: (Map&lt;String, dynamic&gt; data, ChatModel chat) {
  if (my!.photoUrl.isEmpty || my!.displayName.isEmpty) {
    error(
      context: context,
      title: 'Incomplete Profile',
      message: 'Please fill in all missing profile information.',
    );
    throw 'The profile is incomplete.';
  }
});
</code></pre>
<h2 id="blocking-users">Blocking users</h2>
<pre><code class="language-json">/chat-rooms/
 /chat_room_id
  {
   users: { uid-a: true, uid-b: false, ... },
   blockedUsers: { uid-c: true, },
  }
</code></pre>
<ol>
<li>hard limit, they (disabled users) are restricted to chat, view chat message by security rules.</li>
<li>
<p>soft limit, the fireflutter sdk informs user that they are blocked.</p>
</li>
<li>
<p>admin or the master of the chat room can block user and unblock user (from the chat room menu).</p>
</li>
</ol>
<h2 id="deleting-message">Deleting message</h2>
<ul>
<li>
<p>Admin or master can delete other user's message</p>
</li>
<li>
<p>User can delete his own message</p>
</li>
</ul>
<h2 id="chat-bubble-behaviors">Chat Bubble Behaviors</h2>
<h3 id="when-message-is-too-long">When message is too long</h3>
<p>Chat Bubble has its way to handle the message when it’s too long. It will consider the message tooLong if the length of the text exceeded 360, or if the text consists of more than 10 endlines.</p>
<p>It will show read more button if the message is tooLong.</p>
<h3 id="when-replied-message-is-tapped">When replied message is tapped</h3>
<p>Same as when the message is long, it will show a popup like read more to show the replied message.</p>
<h3 id="when-long-pressed">When long pressed</h3>
<p>This widget is used to show dropdown when Chat Bubble is long pressed.</p>
<p>The Chat Bubble widget is a child of ChatBubblePopupMenuButton in the default chat messages list.</p>
<p>The dropdown may show the following callbacks:</p>
<ul>
<li>onViewProfile</li>
<li>View the Users Profile</li>
<li>onReply</li>
<li>Reply on the message.</li>
<li>onDeleteMessage</li>
<li>Delete the Message</li>
<li>onBlock</li>
<li>Block the user from the group chat</li>
</ul>
<h2 id="replying-on-a-message">Replying on a message</h2>
<p>Users can reply to a message by choosing reply to the message. Fireflutter added a ValueNotifier <code>replyTo</code> to the chat model. It is being accesed by both chat input box and chat listing so that the <code>replyTo</code> can be put into the Chat Input Box.</p>
<h2 id="known-issues">Known Issues</h2>
<ul>
<li>In a chat room, when the last message is deleted, it wont automatically reflect in the chat room listing.</li>
<li>Upon deleting message, the messages that replied to it will not delete the message information.</li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.ad660dcc.min.js"></script>
      
    
  </body>
</html>